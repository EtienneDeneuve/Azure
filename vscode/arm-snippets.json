{
    "Subnet as vNet Child": {
        "prefix": "arm-ed-child-sn",
        "body": [
            "            {",
            "                \"name\": \"{$1:Subnet-Name}\",",
            "                \"properties\": {",
            "                    \"addressPrefix\": \"{2:Prefix}\"",
            "                }",
            "            }"
        ],
        "description": "Add a child subnet in Vnet "
    },
    "vNet as Output Reference": {
        "prefix": "arm-ed-vnetid-output",
        "body": [
        "    \"${2:vnet2}-ID\": {",
        "       \"type\": \"object\",",
        "       \"value\": \"[resourceId(${optional:subscription},${optional:resourceGroupName},'microsoft.network/virtualnetworks', ${2:vnet2}), variables('apiVersion'))]\"",
        "   },"
        ],
        "description": "This snippet is used with vNet Peering snippet"
    },
    "Virtual Network Peering": {
        "prefix": "arm-ed-vn-peering",
        "body": [
            "{",
			"	\"type\": \"Microsoft.Network/virtualNetworks/virtualNetworkPeerings\",",
			"		\"comments\": \"Be careful, the Vnet to Vnet peering use the name as an ID!\",",
			"	\"name\": \"[concat(${1:Vnet1}, '/LinkTo', ${2:Vnet2})]\",",
			"	\"apiVersion\": \"[variables('apiVersion')]\",",
			"	\"location\": \"[resourceGroup().location]\",",
			"	\"properties\": {",
			"		\"allowVirtualNetworkAccess\": true,",
			"		\"allowForwardedTraffic\": true,",
			"		\"allowGatewayTransit\": false,",
			"		\"useRemoteGateways\": true,",
			"		\"remoteVirtualNetwork\": {",
			"		\"comments\": \"subscription and resourcesgroupname are optional, but if you want to peer 2 vnet in 2 resources group, you need that! You also Need to update the other side, you also need to add \"arm-vnetid-output\" in output :)  \",",
			"			\"id\": \"[resourceId(${optional:subscription},${optional:resourceGroupName},'microsoft.network/virtualnetworks', ${2:vnet2})]\"",
			"		}",
			"	},",
			"	\"dependsOn\": [",
			"		\"[resourceId(${optional:subscription},${optional:resourceGroupName},'microsoft.network/virtualnetworks', ${2:vnet2})]\"",
			"	]",
            "},"
        ],
        "description": "Create a vnet peering"
    },
    "Minimal Windows Virtual Machine": {
        "prefix": "arm-ed-vm-windows-mini",
        "body": [
            "{",
            "    \"type\": \"Microsoft.Storage/storageAccounts\",",
            "    \"name\": \"[toLower('${WindowsVM1}storage')]\",",
            "    \"apiVersion\": \"2015-06-15\",",
            "    \"location\": \"[resourceGroup().location]\",",
            "    \"tags\": {",
            "        \"displayName\": \"${WindowsVM1} Storage Account\"",
            "    },",
            "    \"properties\": {",
            "        \"accountType\": \"Standard_LRS\"",
            "    }",
            "},",
            "{",
            "    \"apiVersion\": \"2015-06-15\",",
            "    \"type\": \"Microsoft.Compute/virtualMachines\",",
            "    \"name\": \"${WindowsVM1}\",",
            "    \"location\": \"[resourceGroup().location]\",",
            "    \"dependsOn\": [",
            "        \"[concat('Microsoft.Storage/storageAccounts/', toLower('${WindowsVM1}storage'))]\",",
            "        \"Microsoft.Network/networkInterfaces/${WindowsVM1}-NetworkInterface\"",
            "    ],",
            "    \"tags\": {",
            "        \"displayName\": \"${WindowsVM1}\"",
            "    },",
            "    \"properties\": {",
            "        \"hardwareProfile\": {",
            "            \"vmSize\": \"Standard_A2\"",
            "        },",
            "        \"osProfile\": {",
            "            \"computerName\": \"${WindowsVM1}\",",
            "            \"adminUsername\": \"${ADMIN_USERNAME}\",",
            "            \"adminPassword\": \"${ADMIN_PASSWORD}\"",
            "        },",
            "        \"storageProfile\": {",
            "            \"imageReference\": {",
            "                \"publisher\": \"MicrosoftWindowsServer\",",
            "                \"offer\": \"WindowsServer\",",
            "                \"sku\": \"2012-R2-Datacenter\",",
            "                \"version\": \"latest\"",
            "            },",
            "            \"osDisk\": {",
            "                \"name\": \"${WindowsVM1}OSDisk\",",
            "                \"vhd\": {",
            "                    \"uri\": \"[concat('http://', toLower('${WindowsVM1}storage'), '.blob.core.windows.net/vhds/${WindowsVM1}-OSDisk.vhd')]\"",
            "                },",
            "                \"caching\": \"ReadWrite\",",
            "                \"createOption\": \"FromImage\"",
            "            }",
            "        },",
            "        \"networkProfile\": {",
            "            \"networkInterfaces\": [",
            "                {",
            "                    \"id\": \"[resourceId('Microsoft.Network/networkInterfaces', '${WindowsVM1}-NetworkInterface')]\"",
            "                }",
            "            ]",
            "        }",
            "    }",
            "}"
        ],
        "description": "Minimal Windows Virtual Machine"
    },
    "Linux Virtual Machine Minimal": {
        "prefix": "arm-ed-vm-Linux-mini",
        "body": [
            "{",
            "    \"type\": \"Microsoft.Storage/storageAccounts\",",
            "    \"name\": \"[toLower('${LinuxVM1}storage')]\",",
            "    \"apiVersion\": \"2015-06-15\",",
            "    \"location\": \"[resourceGroup().location]\",",
            "    \"tags\": {",
            "        \"displayName\": \"${LinuxVM1} Storage Account\"",
            "    },",
            "    \"properties\": {",
            "        \"accountType\": \"Standard_LRS\"",
            "    }",
            "},",
            "{",
            "    \"apiVersion\": \"2015-06-15\",",
            "    \"type\": \"Microsoft.Network/networkInterfaces\",",
            "    \"name\": \"${LinuxVM1}-NetworkInterface\",",
            "    \"location\": \"[resourceGroup().location]\",",
            "    \"dependsOn\": [",
            "        \"Microsoft.Network/virtualNetworks/${1:vNet-name}\"",
            "    ],",
            "    \"tags\": {",
            "        \"displayName\": \"${LinuxVM1} Network Interface\"",
            "    },",
            "    \"properties\": {",
            "        \"ipConfigurations\": [",
            "            {",
            "                \"name\": \"ipconfig1\",",
            "                \"properties\": {",
            "                    \"privateIPAllocationMethod\": \"Dynamic\",",
            "                    \"subnet\": {",
            "                        \"id\": \"[concat(resourceId('Microsoft.Network/virtualNetworks', '${1:vNet-name}'), '/subnets/${2:subnet-name}')]\"",
            "                    }",
            "                }",
            "            }",
            "        ]",
            "    }",
            "},",
            "{",
            "    \"apiVersion\": \"2015-06-15\",",
            "    \"type\": \"Microsoft.Compute/virtualMachines\",",
            "    \"name\": \"${LinuxVM1}\",",
            "    \"location\": \"[resourceGroup().location]\",",
            "    \"dependsOn\": [",
            "        \"[concat('Microsoft.Storage/storageAccounts/', toLower('${LinuxVM1}storage'))]\",",
            "        \"Microsoft.Network/networkInterfaces/${LinuxVM1}-NetworkInterface\"",
            "    ],",
            "    \"tags\": {",
            "        \"displayName\": \"${LinuxVM1}\"",
            "    },",
            "    \"properties\": {",
            "        \"hardwareProfile\": {",
            "            \"vmSize\": \"Standard_A2\"",
            "        },",
            "        \"osProfile\": {",
            "            \"computerName\": \"${LinuxVM1}\",",
            "            \"adminUsername\": \"${ADMIN_USERNAME}\",",
            "            \"adminPassword\": \"${ADMIN_PASSWORD}\"",
            "        },",
            "        \"storageProfile\": {",
            "            \"imageReference\": {",
            "                \"publisher\": \"Canonical\",",
            "                \"offer\": \"UbuntuServer\",",
            "                \"sku\": \"16.04-LTS\",",
            "                \"version\": \"latest\"",
            "            },",
            "            \"osDisk\": {",
            "                \"name\": \"${LinuxVM1}OSDisk\",",
            "                \"vhd\": {",
            "                    \"uri\": \"[concat('http://', toLower('${LinuxVM1}storage'), '.blob.core.windows.net/vhds/${LinuxVM1}-OSDisk.vhd')]\"",
            "                },",
            "                \"caching\": \"ReadWrite\",",
            "                \"createOption\": \"FromImage\"",
            "            }",
            "        },",
            "        \"networkProfile\": {",
            "            \"networkInterfaces\": [",
            "                {",
            "                    \"id\": \"[resourceId('Microsoft.Network/networkInterfaces', '${LinuxVM1}-NetworkInterface')]\"",
            "                }",
            "            ]",
            "        },",
            "        \"diagnosticsProfile\": {",
            "            \"bootDiagnostics\": {",
            "                \"enabled\": true,",
            "                \"storageUri\": \"[concat('http://', toLower('${LinuxVM1}storage'), '.blob.core.windows.net')]\"",
            "            }",
            "        }",
            "    }",
            "}",
            "}"
        ],
        "description": "Linux Virtual Machine Minimal"
    }
}
